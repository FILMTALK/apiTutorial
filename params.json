{"name":"API Node.js","tagline":"","body":"<h4>Requisitos</h4>\r\nSe necesita crear un archivo llamado \"<b>package.json</b>\" para establecer las dependencias <b>express</b> y <b>request</b>.\r\n\r\nPara instalar esas dependencias hay que hacer un <b> sudo npm install </b> en la terminal.\r\n\r\nY para ejecutar desde el terminal se utiliza el comando <b> node app.js </b>.\r\n\r\n<br>\r\n<h4>Código</h4>\r\n```js\r\n\r\n//Definición de las dependencias\r\n\r\nvar express  = require('express');\r\nvar request = require('request');\r\n\r\nvar app      = express(); \r\nvar port     = process.env.PORT || 3000;\r\n\r\n\r\n// Rutas\r\n\r\napp.get(\"/cartelera\", function(req, res) {\r\n\r\n\t// URL para obtener las películas en cartelera\r\n\tvar url='http://filmdate-filmdate.rhcloud.com/api/api.php/getCartelera';\r\n\r\n\tvar request = require('request');\r\n\r\n\t// Si la URL es un json devolverá los datos por pantalla y por consola\r\n\trequest({url:url, json:\"true\"}, function (error, response, body) {\r\n\r\n\t\tif (!error && response.statusCode == 200) {\r\n\r\n\t\t\tconsole.log(body);\r\n\t\t\tres.json(body);\r\n\t\t}\r\n\t\telse { // Si la URL no es un json, devolverá error\r\n\r\n\t\t\tres.json({error:\"request error\"});\r\n\t\t}\r\n\t});\r\n\r\n});\r\n\r\napp.get(\"/pelicula/:titulo\", function(req, res) {\r\n\r\n\t// URL para obtener los datos de una película\r\n\tvar url='http://filmdate-filmdate.rhcloud.com/api/api.php/getPelicula/'+req.params.titulo;\r\n\r\n\tvar request = require('request');\r\n\r\n\t// Si la URL es un json devolverá los datos por pantalla y por consola\r\n\trequest({url:url, json:\"true\"}, function (error, response, body) {\r\n\r\n\t\tif (!error && response.statusCode == 200) {\r\n\r\n\t\t\tconsole.log(body);\r\n\t\t\tres.json(body);\r\n\t\t}\r\n\t\telse { // Si la URL no es un json, devolverá error\r\n\r\n\t\t\tres.json({error:\"request error\"});\r\n\t\t}\r\n\t});\r\n\r\n});\r\n\r\n// Arranque del servidor\r\n\r\napp.listen(port);\r\nconsole.log('The magic happens on port ' + port);\r\n```\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}